CREATE TABLE `account` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `account` varchar(50) NOT NULL DEFAULT '' COMMENT '账号 手机、邮箱',
  `type` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '账号类型 0 默认、1 手机、2 email、3 alipay open_id 4 wechat open_id 5 wechat union_id',
  `source` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '账号来源 0 默、 2 alipay、3 wechat',
  `password` varchar(50) NOT NULL DEFAULT '' COMMENT '密码',

  `nickname` varchar(50) NOT NULL DEFAULT '' COMMENT '昵称',
  `gender` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '性别 0 默认、1 男、2 女',
  `avatar` varchar(255) NOT NULL DEFAULT '' COMMENT '头像',

  `version` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '版本号',
  `delete_flag` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除 0未删除，1已删除',
  `last_editor` bigint(20) unsigned NOT NULL DEFAULT '0' COMMENT '最后编辑者',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '编辑时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='账号表';

CREATE TABLE `access_token` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `client_id` varchar(20) NOT NULL DEFAULT '',
  `access_token_value` varchar(30) NOT NULL DEFAULT '',
  `refresh_token_value` varchar(30) NOT NULL DEFAULT '',
  `expired_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `is_delete` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `source` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


CREATE TABLE `refresh_token` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `client_id` varchar(20) NOT NULL DEFAULT '',
  `refresh_token_value` varchar(30) NOT NULL DEFAULT '',
  `expired_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `is_delete` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


CREATE TABLE `verify_code` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `mobile` varchar(20) NOT NULL DEFAULT '',
  `code` varchar(6) NOT NULL DEFAULT '',
  `expired_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `is_delete` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE `account_wechat` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0' COMMENT '账号id',
  `open_id` varchar(50) NOT NULL DEFAULT '' COMMENT '微信 open id',
  `mp_open_id` varchar(50) NOT NULL DEFAULT '' COMMENT '微信小程序open id',
  `union_id` varchar(50) NOT NULL DEFAULT '' COMMENT '微信 union id',
  `version` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '版本号',
  `delete_flag` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除 0未删除，1已删除',
  `last_editor` bigint(20) unsigned NOT NULL DEFAULT '0' COMMENT '最后编辑者',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '编辑时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户微信授权关系表';