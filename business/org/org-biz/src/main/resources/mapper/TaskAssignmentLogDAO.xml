<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="study.daydayup.wolf.business.org.biz.task.dal.dao.TaskAssignmentLogDAO">


<!--auto generated by MybatisCodeHelper on 2020-03-15-->
    <select id="selectByTaskId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from task_assignment_log
        where task_id=#{taskId,jdbcType=BIGINT}
        and org_id=#{orgId,jdbcType=BIGINT}
        limit 1
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-03-15-->
    <select id="selectByTaskIdIn" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from task_assignment_log
        where task_id in
        <foreach item="item" index="index" collection="taskIdCollection"
                 open="(" separator="," close=")">
            #{item,jdbcType=BIGINT}
        </foreach>
        and org_id=#{orgId,jdbcType=BIGINT}
    </select>


    <insert id="bulkAddLog">
        insert into task_assignment_log(
            org_id,
            task_id,
            project_id,

            assigner,
            source_owner,
            target_owner,
            source_version,
            target_version,

            memo,
            tags,
            editor,
            created_at
        )
        VALUES
        <foreach collection="logs" item="item" index="index" separator=",">
            #{orgId,jdbcType=BIGINT}
            #{taskId,jdbcType=BIGINT}
            #{projectId,jdbcType=BIGINT}

            #{assigner,jdbcType=BIGINT}
            #{sourceOwner,jdbcType=BIGINT}
            #{targetOwner,jdbcType=BIGINT}
            #{sourceVersion,jdbcType=INTEGER}
            #{targetVersion,jdbcType=INTEGER}

            #{memo,jdbcType=VARCHAR}
            #{tags,jdbcType=VARCHAR}
            #{editor,jdbcType=BIGINT}
            #{createdAt,jdbcType=TIMESTAMP}
        </foreach>
    </insert>


</mapper>